import {expect, test} from '@jest/globals';
import { login } from '../util/Functions.js';

// it('Should log in the user', async () => {
//     // console.log the react environment variables
//     const res = await login("natdat47@gmail.com", "Minecraft1#");
//     expect(res).not.toBeNull();
//     expect(res).not.toBeUndefined();
//     console.log(res);
// });

describe('scope', () => {
    it('Should log in the user', async () => {
        // console.log the react environment variables
        const res = await login("natdat47@gmail.com", "Minecraft1#");
        console.log(res);
        expect(res).not.toBeNull();
        expect(res).not.toBeUndefined();
    });
});

// test('test#login: sets up login data', async () => {
//     // const res = login("natdat47@gmail.com", "Minecraft1#").then(async (response) => {
//     //     // var valid = false;
//     //     response.json().then(async (json) => {
//     //         return json;
//     //     });

//     // });

//     const res = await login("natdat47@gmail.com", "Minecraft1#").then(async (response) => {
//         // var valid = false;
//         let json = await response.json();
//         return json;
//         // if(json.token !== undefined) {
//         //     // valid = true;
//         //     sessionStorage.setItem("token", json.token);
//         //     sessionStorage.setItem("userid", json.userId);
//         //     sessionStorage.setItem("loggedIn", "true");
//         // }

        

//         // if (!valid) {
//         //     setUserMessage('Invalid email or password');
//         // } else {
//         //     setUserMessage('');
//         // }
//     });

//     expect(res).not.toBeUndefined();
//     // expect(res).not.toBeNull();
//     // expect(res).not.toBe('');
//     // expect(res).not.toBe('undefined');
//     // expect(res).not.toBe('null');

//     global.sessionStorage.setItem("token", res.token);
//     global.sessionStorage.setItem("userid", res.userId);

//     console.log("token: " + global.sessionStorage.getItem("token"));
//     console.log("userid: " + global.sessionStorage.getItem("userid"));

//     expect(global.sessionStorage.getItem("token")).not.toBeNull();

//     // console.log(res);

//     // expect(res).not.toBeUndefined();
//     // global.sessionStorage.setItem("token", res.token);
//     // global.sessionStorage.setItem("userid", res.userId);

//     // console.log("token: " + global.sessionStorage.getItem("token"));
//     // console.log("userid: " + global.sessionStorage.getItem("userid"));

//     // expect(global.sessionStorage.getItem("token")).not.toBeNull();
//     // expect(global.sessionStorage.getItem("userid")).not.toBeNull();
// });